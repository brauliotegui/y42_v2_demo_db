{
  "nodeDataArray": [
    {
      "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
      "type": "INPUT",
      "category": "INPUT",
      "transformationStep": {
        "id": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
        "title": "demo_orders_shopify",
        "transformationType": "INPUT",
        "datasourceName": "Shopify",
        "transformObject": {
          "source": "src/Integrations/Shopify",
          "table": "src/Integrations/Shopify/demo_orders_shopify.csv",
          "lang": ""
        }
      },
      "isGroup": true,
      "location": "0 71.5"
    },
    {
      "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
      "type": "INPUT",
      "category": "INPUT",
      "transformationStep": {
        "id": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
        "title": "demo_orders_amazon",
        "transformationType": "INPUT",
        "datasourceName": "Amazon Shop",
        "transformObject": {
          "source": "src/Integrations/Amazon_Shop",
          "table": "src/Integrations/Amazon_Shop/demo_orders_amazon.csv",
          "lang": ""
        }
      },
      "isGroup": true,
      "location": "0 276"
    },
    {
      "key": "8b016541-f47e-4ee7-9593-33009912a5b4",
      "type": "UNION",
      "category": "UNION",
      "transformationStep": {
        "id": "8b016541-f47e-4ee7-9593-33009912a5b4",
        "title": "Union",
        "transformationType": "UNION",
        "transformObject": {
          "fields": [
            {
              "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
              "target": "orders_id",
              "source": "orders_id",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
              "target": "total_amount",
              "source": "total_amount",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
              "target": "order_date",
              "source": "order_date",
              "type": "DATE",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
              "target": "customers_id",
              "source": "customers_id",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
              "target": "shop",
              "source": "shop",
              "type": "STRING",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
              "target": "clv",
              "source": "clv",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
              "target": "orders_id",
              "source": "orders_id",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
              "target": "total_amount",
              "source": "total_amount",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
              "target": "order_date",
              "source": "order_date",
              "type": "DATE",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
              "target": "customers_id",
              "source": "customers_id",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
              "target": "shop",
              "source": "shop",
              "type": "STRING",
              "display": true,
              "description": "",
              "source_alias": ""
            },
            {
              "key": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
              "target": "clv",
              "source": "clv",
              "type": "INTEGER",
              "display": true,
              "description": "",
              "source_alias": ""
            }
          ],
          "tables": [
            "b99b4b44-86e8-4940-918d-f65cf7e3718f",
            "a80245bc-b3f1-4e78-b4e1-74489b327b21"
          ]
        }
      },
      "isGroup": true,
      "location": "247 71.5"
    },
    {
      "key": "1ad340d8-db2a-4c6d-8449-937cc64d36cb",
      "type": "GROUP_BY",
      "category": "GROUP_BY",
      "transformationStep": {
        "id": "1ad340d8-db2a-4c6d-8449-937cc64d36cb",
        "title": "Aggregations",
        "transformationType": "GROUP_BY",
        "transformObject": {
          "columns": [
            {
              "name": "orders_id",
              "alias": "first_order_id",
              "func": "MIN"
            },
            {
              "name": "order_date",
              "alias": "first_order_date",
              "func": "MIN"
            },
            {
              "name": "total_amount",
              "alias": "clv",
              "func": "SUM"
            },
            {
              "name": "orders_id",
              "alias": "orders_count",
              "func": "COUNT"
            }
          ],
          "groupBy": [
            "customers_id"
          ]
        }
      },
      "isGroup": true,
      "location": "515 0"
    },
    {
      "key": "8bfb083f-e19b-4e0a-998b-0d3c874da06e",
      "type": "JOIN",
      "category": "JOIN",
      "transformationStep": {
        "id": "8bfb083f-e19b-4e0a-998b-0d3c874da06e",
        "title": "Join",
        "transformationType": "JOIN",
        "transformObject": {
          "type": "left",
          "left": "af678f4f-2616-4b60-9fdd-0271eff16fa4",
          "right": "1ad340d8-db2a-4c6d-8449-937cc64d36cb",
          "joinConditions": [
            {
              "left": "customers_id",
              "right": "customers_id"
            }
          ],
          "customMapping": {
            "customers_id": "customer_id"
          }
        }
      },
      "isGroup": true,
      "location": "1051 143"
    },
    {
      "key": "1be36443-c0ac-40f1-a68d-c4b7a0b3dac4",
      "type": "BIN",
      "category": "BIN",
      "transformationStep": {
        "id": "1be36443-c0ac-40f1-a68d-c4b7a0b3dac4",
        "title": "Bin",
        "transformationType": "BIN",
        "transformObject": [
          {
            "target": "repeat_order",
            "source": "helper_orders_id_dif",
            "elseCase": "TRUE",
            "parameters": [
              {
                "name": "FALSE",
                "value": "0",
                "operations": "filter%5Bhelper_orders_id_dif%5D=0"
              }
            ]
          }
        ]
      },
      "isGroup": true,
      "location": "1587 143"
    },
    {
      "key": "40931340-18db-42ea-adab-ee8c62856b12",
      "type": "DATE_COMPARISON",
      "category": "DATE_COMPARISON",
      "transformationStep": {
        "id": "40931340-18db-42ea-adab-ee8c62856b12",
        "title": "Date Comparison",
        "transformationType": "DATE_COMPARISON",
        "transformObject": [
          {
            "target": "months_since_first_order",
            "targetUnit": "MONTH",
            "sourceColumn": {
              "constant": "",
              "column": "order_date",
              "hasTimeZone": true,
              "defaultTimezone": "UTC",
              "selection": "column",
              "defaultFormat": "YYYY-MM-DD"
            },
            "compareWith": {
              "constant": "",
              "showSigned": false,
              "column": "first_order_date",
              "hasTimeZone": true,
              "defaultTimezone": "UTC",
              "selection": "column",
              "defaultFormat": "YYYY-MM-DD"
            }
          }
        ]
      },
      "isGroup": true,
      "location": "1855 143"
    },
    {
      "key": "03955fb4-e612-4bbf-8e8a-6fe0fac44752",
      "type": "DATE_COMPARISON",
      "category": "DATE_COMPARISON",
      "transformationStep": {
        "id": "03955fb4-e612-4bbf-8e8a-6fe0fac44752",
        "title": "Date Comparison",
        "transformationType": "DATE_COMPARISON",
        "transformObject": {
          "target": "days_since_first_order",
          "targetUnit": "DAY",
          "sourceColumn": {
            "constant": "",
            "column": "order_date",
            "hasTimeZone": true,
            "defaultTimezone": "UTC",
            "selection": "column",
            "defaultFormat": "YYYY-MM-DD"
          },
          "compareWith": {
            "constant": "",
            "showSigned": false,
            "column": "first_order_date",
            "hasTimeZone": true,
            "defaultTimezone": "UTC",
            "selection": "column",
            "defaultFormat": "YYYY-MM-DD"
          }
        }
      },
      "isGroup": true,
      "location": "2123 143"
    },
    {
      "key": "e3454839-8abd-4c23-aaf1-6fa5a15cb5e0",
      "type": "OUTPUT",
      "category": "OUTPUT",
      "transformationStep": {
        "id": "e3454839-8abd-4c23-aaf1-6fa5a15cb5e0",
        "title": "demo_orders_combined",
        "transformationType": "OUTPUT"
      },
      "isGroup": true,
      "location": "3442 143"
    },
    {
      "key": "34e7e944-c1f8-496f-9b3d-f2ef9342cfb3",
      "type": "FIELDS",
      "category": "FIELDS",
      "transformationStep": {
        "id": "34e7e944-c1f8-496f-9b3d-f2ef9342cfb3",
        "title": "Fields",
        "transformationType": "FIELDS",
        "transformObject": [
          {
            "target": "orders_id",
            "source": "orders_id",
            "type": "text",
            "display": true,
            "description": "",
            "changed": true,
            "display_name": "orders_id",
            "source_alias": "demo_orders_shopify"
          },
          {
            "target": "total_amount",
            "source": "total_amount",
            "type": "number",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "total_amount",
            "source_alias": "demo_orders_shopify"
          },
          {
            "target": "order_date",
            "source": "order_date",
            "type": "date",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "order_date",
            "source_alias": "demo_orders_shopify"
          },
          {
            "target": "customers_id",
            "source": "customers_id",
            "type": "text",
            "display": true,
            "description": "",
            "changed": true,
            "display_name": "customers_id",
            "source_alias": "demo_orders_shopify"
          },
          {
            "target": "shop",
            "source": "shop",
            "type": "text",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "shop",
            "source_alias": "demo_orders_shopify"
          },
          {
            "target": "first_order_id",
            "source": "first_order_id",
            "type": "text",
            "display": true,
            "description": "",
            "changed": true,
            "display_name": "first_order_id",
            "source_alias": "Group By"
          },
          {
            "target": "first_order_date",
            "source": "first_order_date",
            "type": "date",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "first_order_date",
            "source_alias": "Group By"
          },
          {
            "target": "clv",
            "source": "clv",
            "type": "number",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "clv",
            "source_alias": "Group By"
          },
          {
            "target": "last_click_channel",
            "source": "last_click_channel",
            "type": "text",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "last_click_channel",
            "source_alias": "demo_analytics_transactions"
          },
          {
            "target": "helper_orders_id_dif",
            "source": "helper_orders_id_dif",
            "type": "number",
            "display": false,
            "description": "",
            "changed": false,
            "display_name": "helper_orders_id_dif",
            "source_alias": "ARITHMETIC"
          },
          {
            "target": "repeat_order",
            "source": "repeat_order",
            "type": "boolean",
            "display": true,
            "description": "",
            "changed": true,
            "display_name": "repeat_order",
            "source_alias": "Bin"
          },
          {
            "target": "months_since_first_order",
            "source": "months_since_first_order",
            "type": "number",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "months_since_first_order",
            "source_alias": "Date Comparison"
          },
          {
            "target": "days_since_first_order",
            "source": "days_since_first_order",
            "type": "number",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "days_since_first_order",
            "source_alias": "Date Comparison"
          },
          {
            "target": "weeks_since_first_order",
            "source": "weeks_since_first_order",
            "type": "number",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "weeks_since_first_order",
            "source_alias": "Math function"
          },
          {
            "target": "orders_count",
            "source": "orders_count",
            "type": "number",
            "display": true,
            "description": "",
            "changed": false,
            "display_name": "orders_count",
            "source_alias": "Group By"
          }
        ]
      },
      "isGroup": true,
      "location": "2927 143"
    },
    {
      "isSidebarType": true,
      "version": 1,
      "key": "0f1ce1b0-7e3f-4c79-9f19-16f37e1f2706",
      "category": "stickyNode",
      "size": "200 120",
      "location": "100 60",
      "background": "#FFF1CC",
      "text": "1. first order date (user)\n2. repeat order (order)\n3. clv (user)\n4. # orders (user)\n5. months since first order (order)\n6. channel (order)",
      "textColor": "#03053D",
      "shadowColor": "#00000050",
      "shadowOffset": "1 2",
      "shadowBlur": 5,
      "font": "normal 14px Segoe UI",
      "group": "",
      "layerName": "",
      "zOrder": null
    },
    {
      "key": "a67b70f3-7c6a-4112-8b29-a181d9d44c89",
      "type": "PARTITION",
      "category": "PARTITION",
      "transformationStep": {
        "id": "a67b70f3-7c6a-4112-8b29-a181d9d44c89",
        "title": "Partition",
        "transformationType": "PARTITION",
        "transformObject": [
          {
            "target": "partitioned_order",
            "source": "",
            "constant": null,
            "func": "RANK",
            "over": {
              "partition": [
                "order_date",
                "customers_id"
              ],
              "row_range": {
                "is_between": false,
                "from": {
                  "range": "",
                  "action": ""
                },
                "to": {
                  "range": "",
                  "action": ""
                }
              },
              "order": [
                {
                  "field": "orders_id",
                  "direction": "ASC"
                }
              ]
            }
          }
        ]
      },
      "isGroup": true,
      "location": "515 143"
    },
    {
      "key": "af678f4f-2616-4b60-9fdd-0271eff16fa4",
      "type": "FILTER",
      "category": "FILTER",
      "transformationStep": {
        "id": "af678f4f-2616-4b60-9fdd-0271eff16fa4",
        "title": "Filter",
        "transformationType": "FILTER",
        "transformObject": {
          "filter_fields": [
            {
              "display_name": null,
              "description": null,
              "distribution": [],
              "drag_disabled": false,
              "settings": null,
              "nestedColumns": [],
              "field_name": "partitioned_order",
              "type": "number"
            }
          ],
          "filterGroups": [
            "filter%5Bpartitioned_order%5D=1"
          ],
          "filters": "",
          "global_op": [
            "AND"
          ]
        }
      },
      "isGroup": true,
      "location": "783 143"
    },
    {
      "key": "c400d20e-4ba9-49a4-bcd6-3bf0c510a6e5",
      "type": "FUNCTIONS",
      "category": "FUNCTIONS",
      "transformationStep": {
        "id": "c400d20e-4ba9-49a4-bcd6-3bf0c510a6e5",
        "title": "",
        "transformationType": "FUNCTIONS"
      },
      "isGroup": true,
      "group": "",
      "location": "1319 143"
    }
  ],
  "linkDataArray": [
    {
      "from": "8b016541-f47e-4ee7-9593-33009912a5b4",
      "to": "1ad340d8-db2a-4c6d-8449-937cc64d36cb"
    },
    {
      "from": "1ad340d8-db2a-4c6d-8449-937cc64d36cb",
      "to": "8bfb083f-e19b-4e0a-998b-0d3c874da06e"
    },
    {
      "from": "1be36443-c0ac-40f1-a68d-c4b7a0b3dac4",
      "to": "40931340-18db-42ea-adab-ee8c62856b12"
    },
    {
      "from": "40931340-18db-42ea-adab-ee8c62856b12",
      "to": "03955fb4-e612-4bbf-8e8a-6fe0fac44752"
    },
    {
      "from": "34e7e944-c1f8-496f-9b3d-f2ef9342cfb3",
      "to": "e3454839-8abd-4c23-aaf1-6fa5a15cb5e0"
    },
    {
      "from": "b99b4b44-86e8-4940-918d-f65cf7e3718f",
      "to": "8b016541-f47e-4ee7-9593-33009912a5b4"
    },
    {
      "from": "a80245bc-b3f1-4e78-b4e1-74489b327b21",
      "to": "8b016541-f47e-4ee7-9593-33009912a5b4"
    },
    {
      "from": "8b016541-f47e-4ee7-9593-33009912a5b4",
      "to": "a67b70f3-7c6a-4112-8b29-a181d9d44c89"
    },
    {
      "from": "a67b70f3-7c6a-4112-8b29-a181d9d44c89",
      "to": "af678f4f-2616-4b60-9fdd-0271eff16fa4"
    },
    {
      "from": "af678f4f-2616-4b60-9fdd-0271eff16fa4",
      "to": "8bfb083f-e19b-4e0a-998b-0d3c874da06e"
    },
    {
      "from": "8bfb083f-e19b-4e0a-998b-0d3c874da06e",
      "to": "c400d20e-4ba9-49a4-bcd6-3bf0c510a6e5"
    },
    {
      "from": "c400d20e-4ba9-49a4-bcd6-3bf0c510a6e5",
      "to": "1be36443-c0ac-40f1-a68d-c4b7a0b3dac4"
    }
  ],
  "$schema": "https://s.dev.y42.dev/integrations/ui_model/0.0.0/model.json"
}
